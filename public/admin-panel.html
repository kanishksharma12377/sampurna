<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sampurna ERP - Admin Panel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css" />
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        maroon: '#800000',
                        'maroon-dark': '#660000',
                        'gray-light': '#f5f5f5',
                        'gray-dark': '#333333',
                    }
                }
            }
        }
    </script>
    <!-- Set this flag to true to use Firestore Emulator locally -->
    <!-- <script>window.USE_FIRESTORE_EMULATOR = true;</script> -->
    <script type="module" src="admin-panel.js"></script>
</head>
<body class="bg-gray-100 min-h-screen">
    
    <div id="departmentStudentsModal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-lg p-8 w-full max-w-xl relative border-2 border-maroon">
            <button id="closeDepartmentModal" class="absolute top-2 right-2 text-gray-500 hover:text-maroon text-2xl font-bold">&times;</button>
            <h3 id="departmentModalTitle" class="text-2xl font-bold text-maroon mb-4"></h3>
            <ul id="departmentStudentsList" class="space-y-3"></ul>
            <div id="departmentModalError" class="text-red-600 font-semibold mt-4 hidden"></div>
        </div>
    </div>

    <div id="notificationBar" class="fixed top-0 left-0 right-0 py-3 px-6 text-center text-white transition-transform duration-500 ease-in-out transform -translate-y-full z-50"></div>

    <header class="bg-maroon text-white p-4 shadow-lg flex items-center justify-between">
        <div class="flex items-center space-x-4">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-8 h-8 text-white">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5M12 17.25h8.25" />
            </svg>
            <h1 class="text-xl font-bold">Sampurna ERP</h1>
        </div>
        <nav class="flex-1 hidden md:flex justify-center space-x-6">
            <button id="nav-dashboard" class="py-2 px-3 rounded-lg font-semibold transition-colors duration-200 hover:bg-white/10 text-white bg-maroon-dark">Dashboard</button>
            <button id="nav-admissions" class="py-2 px-3 rounded-lg font-semibold transition-colors duration-200 hover:bg-white/10">Admissions</button>
            <button id="nav-fees" class="py-2 px-3 rounded-lg font-semibold transition-colors duration-200 hover:bg-white/10">Fees</button>
            <button id="nav-hostel" class="py-2 px-3 rounded-lg font-semibold transition-colors duration-200 hover:bg-white/10">Hostel</button>
            <button id="nav-exams" class="py-2 px-3 rounded-lg font-semibold transition-colors duration-200 hover:bg-white/10">Exams</button>
            <button id="nav-library" class="py-2 px-3 rounded-lg font-semibold transition-colors duration-200 hover:bg-white/10">Library</button>
            <button id="nav-reports" class="py-2 px-3 rounded-lg font-semibold transition-colors duration-200 hover:bg-white/10">Reports</button>
            <button id="nav-departments" class="py-2 px-3 rounded-lg font-semibold transition-colors duration-200 hover:bg-white/10">Departments</button>
            <button id="nav-notices" class="py-2 px-3 rounded-lg font-semibold transition-colors duration-200 hover:bg-white/10">Notices</button>
            
        </nav>
        <div class="flex items-center space-x-4">
            <p class="text-xs hidden sm:block">Admin: <span id="adminEmail" class="font-bold"></span></p>
            <button id="logoutBtn" class="px-4 py-2 text-sm bg-white text-maroon rounded-full font-bold hover:bg-gray-200 transition-colors">Logout</button>
        </div>
    </header>

    <main class="flex-1 p-8 overflow-y-auto scrollbar-hide">
        <div id="adminPanelContainer">
            <section id="dashboard" class="mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Dashboard</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow-lg text-center border-b-4 border-maroon">
                        <h3 class="text-xl font-semibold text-gray-700">Total Students</h3>
                        <p id="totalStudentsCard" class="text-5xl font-bold mt-4 text-maroon">0</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg text-center border-b-4 border-green-500">
                        <h3 class="text-xl font-semibold text-gray-700">Fees Paid</h3>
                        <p id="feesPaidCard" class="text-5xl font-bold mt-4 text-green-500">0</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg text-center border-b-4 border-red-500">
                        <h3 class="text-xl font-semibold text-gray-700">Fees Pending</h3>
                        <p id="feesPendingCard" class="text-5xl font-bold mt-4 text-red-500">0</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg text-center border-b-4 border-blue-500">
                        <h3 class="text-xl font-semibold text-gray-700">Hostel Allocated</h3>
                        <p id="hostelAllocatedCard" class="text-5xl font-bold mt-4 text-blue-500">0</p>
                    </div>
                </div>
                <div class="mt-10">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Students by Department</h3>
                    <div id="dashboardDepartmentsSummary" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
                </div>
            </section>

            <section id="admissions" class="hidden">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Admissions</h2>
                <div class="bg-white p-6 md:p-10 rounded-lg shadow-lg">
                    <h3 class="text-2xl font-bold text-gray-800 text-center mb-6">New Student Application</h3>
                    <form id="admissionForm">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="form-group">
                                <label for="fullName" class="block text-gray-700 font-medium mb-1">Full Name</label>
                                <input type="text" id="fullName" name="fullName" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none transition-colors" placeholder="Enter full name" required>
                            </div>
                            <div class="form-group">
                                <label for="fathersName" class="block text-gray-700 font-medium mb-1">Father's Name</label>
                                <input type="text" id="fathersName" name="fathersName" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none transition-colors" placeholder="Enter father's name" required>
                            </div>
                            <div class="form-group">
                                <label for="dob" class="block text-gray-700 font-medium mb-1">Date of Birth</label>
                                <input type="date" id="dob" name="dob" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none transition-colors" required>
                            </div>
                            <div class="form-group">
                                <label for="course" class="block text-gray-700 font-medium mb-1">Course Applied For</label>
                                <select id="course" name="course" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none transition-colors" required>
                                    <option value="">Select a Course</option>
                                    <option value="Computer Science">Computer Science Engineering</option>
                                    <option value="Mechanical Engineering">Mechanical Engineering</option>
                                    <option value="Electrical Engineering">Electrical Engineering</option>
                                    <option value="Civil Engineering">Civil Engineering</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="email" class="block text-gray-700 font-medium mb-1">Email Address</label>
                                <input type="email" id="email" name="email" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none transition-colors" placeholder="Enter email" required>
                            </div>
                            <div class="form-group">
                                <label for="phone" class="block text-gray-700 font-medium mb-1">Phone Number</label>
                                <input type="tel" id="phone" name="phone" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none transition-colors" placeholder="e.g., 9876543210" required>
                            </div>
                        </div>
                        <button type="submit" class="mt-8 w-full bg-maroon text-white font-bold py-3 px-6 rounded-lg transition-colors hover:bg-maroon-dark focus:outline-none focus:ring-4 focus:ring-maroon-300">Submit Admission</button>
                    </form>
                </div>

                <!-- Find & Edit Student -->
                <div class="bg-white p-6 md:p-10 rounded-lg shadow-lg mt-6 border-t-4 border-blue-500">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">Find & Edit Student</h3>
                    <div class="flex flex-col md:flex-row md:items-center md:space-x-3 space-y-3 md:space-y-0">
                        <input type="text" id="editSearchId" class="flex-1 p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none" placeholder="Enter Admission ID (e.g., SMPRNA-1234-ABCD)">
                        <button id="editSearchBtn" class="px-4 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700">Search</button>
                    </div>
                    <div id="editSearchMsg" class="mt-2 text-sm"></div>

                    <div id="editStudentCard" class="mt-6 hidden">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-gray-700 font-medium mb-1">Full Name</label>
                                <input type="text" id="editFullName" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none">
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-1">Email</label>
                                <input type="email" id="editEmail" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none">
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-1">Phone</label>
                                <input type="tel" id="editPhone" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none">
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-1">Course / Department</label>
                                <input type="text" id="editCourse" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none">
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-1">Semester / Class</label>
                                <input type="text" id="editSemester" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none" placeholder="e.g., Sem 3 or 2nd Year">
                            </div>
                        </div>

                        <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4 p-4 rounded-lg bg-gray-50 border">
                            <div>
                                <div class="text-sm text-gray-500">Total Fees Due</div>
                                <input type="number" id="editTotalFeesDue" class="w-full p-2 mt-1 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none" min="0" step="1">
                            </div>
                            <div>
                                <div class="text-sm text-gray-500">Total Paid (computed)</div>
                                <div id="editTotalPaid" class="text-xl font-semibold mt-2">₹ 0</div>
                            </div>
                            <div>
                                <div class="text-sm text-gray-500">Pending</div>
                                <div id="editPending" class="text-xl font-semibold mt-2">₹ 0</div>
                            </div>
                        </div>

                        <div class="mt-4 flex items-center space-x-3">
                            <button id="editSaveBtn" class="px-5 py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700">Save Changes</button>
                            <div id="editSaveMsg" class="text-sm"></div>
                        </div>

                        <hr class="my-6">
                        <h4 class="text-xl font-semibold mb-3">Quick Payment</h4>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-3">
                            <input type="number" id="quickPayAmount" class="p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none" placeholder="Amount" min="1">
                            <select id="quickPayMode" class="p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none">
                                <option value="Cash">Cash</option>
                                <option value="Online" selected>Online</option>
                                <option value="UPI">UPI</option>
                                <option value="Card">Card</option>
                            </select>
                            <button id="quickPayBtn" class="bg-maroon text-white font-bold py-3 px-6 rounded-lg hover:bg-maroon-dark">Record Payment</button>
                            <div id="quickPayMsg" class="text-sm self-center"></div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="fees" class="hidden">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Fees Management</h2>
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">Record Payment & Print Receipt</h3>
                    <form id="feesUpdateForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <input type="text" id="feesStudentIdInput" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none transition-colors" placeholder="Admission ID (e.g., SMPRNA-1234-ABCD)" required>
                        <input type="number" id="feesAmountInput" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none transition-colors" placeholder="Amount (e.g., 5000)" min="1" required>
                        <select id="feesPaymentMode" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none transition-colors">
                            <option value="Cash">Cash</option>
                            <option value="Online" selected>Online</option>
                            <option value="UPI">UPI</option>
                            <option value="Card">Card</option>
                        </select>
                        <div class="flex items-center space-x-3 md:col-span-2">
                            <button id="updateFeesButton" type="submit" class="flex-1 bg-maroon text-white font-bold py-3 px-6 rounded-lg transition-colors hover:bg-maroon-dark focus:outline-none focus:ring-4 focus:ring-maroon-300">Record Payment</button>
                            <button id="generateReceiptButton" type="button" class="flex-1 bg-green-600 text-white font-bold py-3 px-6 rounded-lg transition-colors hover:bg-green-700 focus:outline-none focus:ring-4 focus:ring-green-300">Generate Receipt</button>
                        </div>
                        <div id="feesActionMsg" class="md:col-span-2 text-sm mt-2"></div>
                    </form>
                </div>

                <div class="bg-white p-6 rounded-lg shadow-lg mt-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Students Fees Status</h3>
                    <div id="feesList" class="space-y-3"></div>
                    <div id="feesListEmpty" class="text-gray-500 hidden">No students found.</div>
                </div>
            </section>

            <section id="hostel" class="hidden">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Hostel Management</h2>
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">Allocate Room</h3>
                    <div class="space-y-4">
                        <input type="text" id="hostelStudentInput" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none transition-colors" placeholder="Admission ID (e.g., SMPRNA-1234-ABCD)" required>
                        <input type="text" id="hostelRoomInput" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none transition-colors" placeholder="Room number (e.g., A-101)" required>
                        <button id="allocateRoomButton" class="w-full bg-maroon text-white font-bold py-3 px-6 rounded-lg transition-colors hover:bg-maroon-dark focus:outline-none focus:ring-4 focus:ring-maroon-300">Allocate Room</button>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg mt-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-xl font-bold text-gray-800">Current Allocations</h3>
                        <button id="refreshHostelAllocations" class="px-4 py-2 bg-gray-100 rounded-lg border hover:bg-gray-200">Refresh</button>
                    </div>
                    <div id="hostelAllocationsList" class="space-y-3"></div>
                    <div id="hostelAllocationsEmpty" class="text-gray-500 hidden">No allocations found.</div>
                </div>
            </section>

            <section id="exams" class="hidden">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Examinations</h2>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- Create Exam -->
                    <div class="bg-white p-6 rounded-lg shadow-lg lg:col-span-1 border-b-4 border-maroon">
                        <h3 class="text-2xl font-bold text-gray-800 mb-4">Create Upcoming Exam</h3>
                        <form id="createExamForm" class="space-y-4">
                            <input type="text" id="examTitle" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none" placeholder="Exam title (e.g., Mid-Sem CSE)" required>
                            <select id="examCourse" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none">
                                <option value="">All Departments</option>
                                <option value="Computer Science">Computer Science</option>
                                <option value="Mechanical Engineering">Mechanical Engineering</option>
                                <option value="Electrical Engineering">Electrical Engineering</option>
                                <option value="Civil Engineering">Civil Engineering</option>
                            </select>
                            <div class="grid grid-cols-2 gap-3">
                                <input type="date" id="examDate" class="p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none" required>
                                <input type="time" id="examTime" class="p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none" required>
                            </div>
                            <textarea id="examDescription" rows="3" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none" placeholder="Short description (optional)"></textarea>
                            <button type="submit" class="w-full bg-maroon text-white font-bold py-3 px-6 rounded-lg transition-colors hover:bg-maroon-dark">Publish Exam</button>
                        </form>
                        <div id="examActionMsg" class="mt-3 text-sm"></div>
                    </div>
                    <!-- Exams List -->
                    <div class="bg-white p-6 rounded-lg shadow-lg lg:col-span-2 border-b-4 border-blue-500">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-2xl font-bold text-gray-800">Upcoming Exams</h3>
                            <button id="refreshExams" class="px-4 py-2 bg-gray-100 rounded-lg border hover:bg-gray-200">Refresh</button>
                        </div>
                        <div id="examsList" class="space-y-3"></div>
                        <div id="examsEmpty" class="text-gray-500 hidden">No upcoming exams.</div>
                    </div>
                </div>
            </section>

            <section id="library" class="hidden">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Library</h2>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- Create Library Card -->
                    <div class="bg-white p-6 rounded-lg shadow-lg border-b-4 border-maroon lg:col-span-1">
                        <h3 class="text-2xl font-bold text-gray-800 mb-4">Create Library Card</h3>
                        <form id="createLibraryCardForm" class="space-y-4">
                            <input type="text" id="libAdmissionId" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none" placeholder="Admission ID (e.g., SMPRNA-1234-ABCD)" required>
                            <input type="text" id="libStudentName" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none" placeholder="Student Name" required>
                            <input type="text" id="libClass" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none" placeholder="Class (e.g., B.Tech CSE 2nd Yr)" required>
                            <input type="text" id="libRollNo" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none" placeholder="Roll No" required>
                            <button type="submit" class="w-full bg-maroon text-white font-bold py-3 px-6 rounded-lg transition-colors hover:bg-maroon-dark">Create Card</button>
                        </form>
                        <div id="createLibraryCardMsg" class="mt-3 text-sm"></div>
                    </div>

                    <!-- Students with Cards & Issued Books -->
                    <div class="bg-white p-6 rounded-lg shadow-lg border-b-4 border-blue-500 lg:col-span-2">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-2xl font-bold text-gray-800">Students with Library Cards</h3>
                            <button id="refreshCardsList" class="px-4 py-2 bg-gray-100 rounded-lg border hover:bg-gray-200">Refresh</button>
                        </div>
                        <div id="cardsList" class="space-y-3 max-h-[420px] overflow-y-auto"></div>
                        <div id="cardsListEmpty" class="text-gray-500 hidden">No library cards found.</div>
                    </div>

                    <!-- Books Catalog -->
                    <div class="bg-white p-6 rounded-lg shadow-lg border-b-4 border-green-500 lg:col-span-3">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-2xl font-bold text-gray-800">Library Books</h3>
                            <div class="flex items-center space-x-2">
                                <button id="refreshBooksList" class="px-4 py-2 bg-gray-100 rounded-lg border hover:bg-gray-200">Refresh</button>
                            </div>
                        </div>
                        <div id="booksList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
                        <div id="booksListEmpty" class="text-gray-500 hidden">No books in catalog.</div>

                        <hr class="my-6">
                        <h4 class="text-xl font-semibold mb-3">Add Book</h4>
                        <form id="addBookForm" class="grid grid-cols-1 md:grid-cols-4 gap-3">
                            <input type="text" id="bookTitle" class="p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none" placeholder="Title" required>
                            <input type="text" id="bookAuthor" class="p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none" placeholder="Author" required>
                            <input type="text" id="bookIsbn" class="p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none" placeholder="ISBN" required>
                            <input type="number" id="bookTotalCount" class="p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none" placeholder="Total Copies" min="1" required>
                            <div class="md:col-span-4">
                                <button type="submit" class="w-full md:w-auto bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700">Add Book</button>
                                <span id="addBookMsg" class="ml-3 text-sm"></span>
                            </div>
                        </form>
                    </div>
                </div>
            </section>

            <section id="reports" class="hidden">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Messages</h2>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow-lg lg:col-span-1">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-xl font-bold text-gray-800">Threads</h3>
                            <button id="refreshThreads" class="px-3 py-1 bg-gray-100 rounded-lg border hover:bg-gray-200">Refresh</button>
                        </div>
                        <div id="threadsList" class="space-y-2 max-h-[520px] overflow-y-auto"></div>
                        <div id="threadsEmpty" class="text-gray-500 hidden">No messages yet.</div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg lg:col-span-2">
                        <div id="threadHeader" class="text-gray-700 font-semibold mb-3">Select a thread</div>
                        <div id="threadMessages" class="space-y-2 max-h-[420px] overflow-y-auto border rounded p-3 bg-gray-50"></div>
                        <form id="replyForm" class="mt-4 flex space-x-2">
                            <input id="replyInput" type="text" class="flex-1 p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none" placeholder="Type your reply..." required />
                            <button type="submit" class="bg-maroon text-white font-bold py-3 px-6 rounded-lg hover:bg-maroon-dark">Send</button>
                        </form>
                        <div id="replyActionMsg" class="text-sm mt-2"></div>
                    </div>
                </div>
            </section>

            <section id="departments" class="hidden">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Departments</h2>
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-xl font-bold text-gray-800">Departments & HOD</h3>
                        <button id="refreshDepartments" class="px-4 py-2 bg-gray-100 rounded-lg border hover:bg-gray-200">Refresh</button>
                    </div>
                    <div id="departmentsManageList" class="space-y-4"></div>
                    <div id="departmentsManageEmpty" class="text-gray-500 hidden">No departments found.</div>
                </div>
            </section>

            <section id="notices" class="hidden">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Notices</h2>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- Create Notice -->
                    <div class="bg-white p-6 rounded-lg shadow-lg border-b-4 border-maroon lg:col-span-1">
                        <h3 class="text-2xl font-bold text-gray-800 mb-4">Create Notice</h3>
                        <form id="createNoticeForm" class="space-y-4">
                            <input type="text" id="noticeTitle" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none" placeholder="Notice title" required>
                            <select id="noticeAudience" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none">
                                <option value="all" selected>All</option>
                                <option value="hostel">Hostel</option>
                                <option value="library">Library</option>
                            </select>
                            <textarea id="noticeMessage" rows="4" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-maroon outline-none" placeholder="Write message..." required></textarea>
                            <button type="submit" class="w-full bg-maroon text-white font-bold py-3 px-6 rounded-lg transition-colors hover:bg-maroon-dark">Publish</button>
                        </form>
                        <div id="noticeActionMsg" class="mt-3 text-sm"></div>
                    </div>

                    <!-- Notices List -->
                    <div class="bg-white p-6 rounded-lg shadow-lg border-b-4 border-blue-500 lg:col-span-2">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-2xl font-bold text-gray-800">Recent Notices</h3>
                            <button id="refreshNotices" class="px-4 py-2 bg-gray-100 rounded-lg border hover:bg-gray-200">Refresh</button>
                        </div>
                        <div id="noticesList" class="space-y-3 max-h-[420px] overflow-y-auto"></div>
                        <div id="noticesEmpty" class="text-gray-500 hidden">No notices yet.</div>
                    </div>
                </div>
            </section>

        </div>

    </main>

</body>
</html>